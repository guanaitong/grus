<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Create a static site from a set of Markdown files to host the documentation of Java"><meta name=author content="August Zhou"><link href=https://java.guide.wuxingdev.cn/grus/data/mybatis-enhance/ rel=canonical><link rel=icon href=../../../assets/favicon.ico><meta name=generator content="mkdocs-1.2.3, mkdocs-material-7.3.6"><title>Mybatis增加 - Java Guide</title><link rel=stylesheet href=../../../assets/stylesheets/main.a57b2b03.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#mybatis class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Java Guide" class="md-header__button md-logo" aria-label="Java Guide" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Java Guide </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Mybatis增加 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://gitlab.wuxingdev.cn/java/framework/grus title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> java/framework/grus </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> 首页 </a> </li> <li class=md-tabs__item> <a href=../../../prepare/contribute/manage/ class=md-tabs__link> 序言 </a> </li> <li class=md-tabs__item> <a href=../../introduction/origin/ class="md-tabs__link md-tabs__link--active"> grus框架 </a> </li> <li class=md-tabs__item> <a href=../../../others/develop-guide/ class=md-tabs__link> 其他 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Java Guide" class="md-nav__button md-logo" aria-label="Java Guide" data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> Java Guide </label> <div class=md-nav__source> <a href=https://gitlab.wuxingdev.cn/java/framework/grus title=前往仓库 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> java/framework/grus </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <div class="md-nav__link md-nav__link--index "> <a href=../../..>首页</a> </div> <nav class=md-nav aria-label=首页 data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> 首页 </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> 序言 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=序言 data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 序言 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../prepare/contribute/manage/ class=md-nav__link> 开发管理 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> 环境安装 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=环境安装 data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 环境安装 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../prepare/develop-env/java-install/ class=md-nav__link> Java安装 </a> </li> <li class=md-nav__item> <a href=../../../prepare/develop-env/maven-install/ class=md-nav__link> Maven安装 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> 规范 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=规范 data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 规范 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../prepare/specs/maven/ class=md-nav__link> Maven规范 </a> </li> <li class=md-nav__item> <a href=../../../prepare/specs/app-framework-spec/ class=md-nav__link> 项目规范 </a> </li> <li class=md-nav__item> <a href=../../../prepare/specs/jdbc-pool-config/ class=md-nav__link> 连接池规范 </a> </li> <li class=md-nav__item> <a href=../../../prepare/specs/app-log/ class=md-nav__link> 日志规范 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> 技巧 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=技巧 data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 技巧 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../prepare/skill/LearningIdea/ class=md-nav__link> IDEA使用技巧 </a> </li> <li class=md-nav__item> <a href=../../../prepare/skill/sonar/ class=md-nav__link> Sonarlint配置指南 </a> </li> <li class=md-nav__item> <a href=../../../prepare/skill/checkstyle/ class=md-nav__link> Checksyle配置 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> grus框架 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=grus框架 data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> grus框架 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../introduction/origin/ class=md-nav__link> 简介 </a> </li> <li class=md-nav__item> <a href=../../introduction/project-structure/ class=md-nav__link> 项目结构 </a> </li> <li class=md-nav__item> <a href=../../introduction/project-starter/ class=md-nav__link> Starter模块 </a> </li> <li class=md-nav__item> <a href=../../introduction/autoconfigure/ class=md-nav__link> Autoconfigure模块 </a> </li> <li class=md-nav__item> <a href=../../introduction/condition/ class=md-nav__link> Condition条件注解 </a> </li> <li class=md-nav__item> <a href=../../introduction/config/ class=md-nav__link> 配置文件 </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../gconf/ >Gconf</a> </div> <nav class=md-nav aria-label=Gconf data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Gconf </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <div class="md-nav__link md-nav__link--index "> <a href=../../api/ >巨灵神规范</a> <label for=__nav_3_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=巨灵神规范 data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> 巨灵神规范 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/grus-feign-use/ class=md-nav__link> feign </a> </li> <li class=md-nav__item> <a href=../../api/grus-feign-guide/ class=md-nav__link> 使用指南 </a> </li> <li class=md-nav__item> <a href=../../api/grus-feign-best-practice/ class=md-nav__link> 最佳实践 </a> </li> <li class=md-nav__item> <a href=../../api/grus-feign-contract/ class=md-nav__link> Feign协议升级 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >data</a> <label for=__nav_3_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=data data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../mybatis-pagehelper/ class=md-nav__link> Mybatis分页插件 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Mybatis增加 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Mybatis增加 </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 特性 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 快速开始 </a> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD 接口 </a> <nav class=md-nav aria-label="CRUD 接口"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mapper class=md-nav__link> Mapper </a> </li> <li class=md-nav__item> <a href=#service class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 条件构造器 </a> <nav class=md-nav aria-label=条件构造器> <ul class=md-nav__list> <li class=md-nav__item> <a href=#conditional class=md-nav__link> Conditional 条件构造器 </a> </li> <li class=md-nav__item> <a href=#query class=md-nav__link> Query 条件构造器 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 示例 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 代码生成器 </a> <nav class=md-nav aria-label=代码生成器> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 快速开始 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 读写分离 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 配置文档 </a> <nav class=md-nav aria-label=配置文档> <ul class=md-nav__list> <li class=md-nav__item> <a href=#baseconfig class=md-nav__link> baseConfig </a> </li> <li class=md-nav__item> <a href=#jdbcconnection class=md-nav__link> jdbcConnection </a> </li> <li class=md-nav__item> <a href=#javamodelgenerator class=md-nav__link> javaModelGenerator </a> </li> <li class=md-nav__item> <a href=#sqlmapgenerator class=md-nav__link> sqlMapGenerator </a> </li> <li class=md-nav__item> <a href=#javaclientgenerator class=md-nav__link> javaClientGenerator </a> </li> <li class=md-nav__item> <a href=#servicegenerator class=md-nav__link> serviceGenerator </a> </li> <li class=md-nav__item> <a href=#controllergenerator class=md-nav__link> controllerGenerator </a> </li> <li class=md-nav__item> <a href=#dtogenerator class=md-nav__link> dtoGenerator </a> </li> <li class=md-nav__item> <a href=#tables class=md-nav__link> tables </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 常见问题 </a> <nav class=md-nav aria-label=常见问题> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tinyint1 class=md-nav__link> TINYINT(1)类型 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 常见异常 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <div class="md-nav__link md-nav__link--index "> <a href=../../redis/ >redis</a> </div> <nav class=md-nav aria-label=redis data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> redis </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_11 type=checkbox id=__nav_3_11> <div class="md-nav__link md-nav__link--index "> <a href=../../zk/ >zookeeper</a> </div> <nav class=md-nav aria-label=zookeeper data-md-level=2> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> zookeeper </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_12 type=checkbox id=__nav_3_12> <div class="md-nav__link md-nav__link--index "> <a href=../../kafka/ >kafka</a> </div> <nav class=md-nav aria-label=kafka data-md-level=2> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> kafka </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_13 type=checkbox id=__nav_3_13> <div class="md-nav__link md-nav__link--index "> <a href=../../web/ >web</a> <label for=__nav_3_13> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=web data-md-level=2> <label class=md-nav__title for=__nav_3_13> <span class="md-nav__icon md-icon"></span> web </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../web/grus-validator/ class=md-nav__link> Validator模块 </a> </li> <li class=md-nav__item> <a href=../../web/grus-swagger/ class=md-nav__link> Swagger使用说明 </a> </li> <li class=md-nav__item> <a href=../../web/grus-freemarker/ class=md-nav__link> Freemarker使用说明 </a> </li> <li class=md-nav__item> <a href=../../web/grus-velocity/ class=md-nav__link> Velocity使用说明 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_14 type=checkbox id=__nav_3_14> <div class="md-nav__link md-nav__link--index "> <a href=../../job/ >job</a> <label for=__nav_3_14> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=job data-md-level=2> <label class=md-nav__title for=__nav_3_14> <span class="md-nav__icon md-icon"></span> job </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../job/elasticjob/ class=md-nav__link> ElasticJob介绍 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_15 type=checkbox id=__nav_3_15> <div class="md-nav__link md-nav__link--index "> <a href=../../test/ >单元测试</a> </div> <nav class=md-nav aria-label=单元测试 data-md-level=2> <label class=md-nav__title for=__nav_3_15> <span class="md-nav__icon md-icon"></span> 单元测试 </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_16 type=checkbox id=__nav_3_16> <div class="md-nav__link md-nav__link--index "> <a href=../../limit/ >微服务流量控制</a> </div> <nav class=md-nav aria-label=微服务流量控制 data-md-level=2> <label class=md-nav__title for=__nav_3_16> <span class="md-nav__icon md-icon"></span> 微服务流量控制 </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_17 type=checkbox id=__nav_3_17> <div class="md-nav__link md-nav__link--index "> <a href=../../session/ >分布式session</a> </div> <nav class=md-nav aria-label=分布式session data-md-level=2> <label class=md-nav__title for=__nav_3_17> <span class="md-nav__icon md-icon"></span> 分布式session </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_18 type=checkbox id=__nav_3_18> <div class="md-nav__link md-nav__link--index "> <a href=../../gfs/ >分布式存储gfs</a> <label for=__nav_3_18> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=分布式存储gfs data-md-level=2> <label class=md-nav__title for=__nav_3_18> <span class="md-nav__icon md-icon"></span> 分布式存储gfs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../gfs/gfs-sdk/ class=md-nav__link> gfs-client使用说明 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_19 type=checkbox id=__nav_3_19> <div class="md-nav__link md-nav__link--index "> <a href=../../frigate/ >frigate消息</a> <label for=__nav_3_19> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=frigate消息 data-md-level=2> <label class=md-nav__title for=__nav_3_19> <span class="md-nav__icon md-icon"></span> frigate消息 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../frigate/grus-frigate-message-handle/ class=md-nav__link> gfs-client使用说明 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_20 type=checkbox id=__nav_3_20> <div class="md-nav__link md-nav__link--index "> <a href=../../others/ >others</a> <label for=__nav_3_20> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=others data-md-level=2> <label class=md-nav__title for=__nav_3_20> <span class="md-nav__icon md-icon"></span> others </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../others/grus-core/ class=md-nav__link> bean复制工具 </a> </li> <li class=md-nav__item> <a href=../../others/grus-json/ class=md-nav__link> JSON使用说明 </a> </li> <li class=md-nav__item> <a href=../../others/grus-17/ class=md-nav__link> Java17升级指南 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> 其他 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=其他 data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../others/develop-guide/ class=md-nav__link> 应用开发指南 </a> </li> <li class=md-nav__item> <a href=../../../others/security-base/ class=md-nav__link> 安全基础 </a> </li> <li class=md-nav__item> <a href=../../../others/short-url/ class=md-nav__link> 短链接 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 特性 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 快速开始 </a> </li> <li class=md-nav__item> <a href=#crud class=md-nav__link> CRUD 接口 </a> <nav class=md-nav aria-label="CRUD 接口"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mapper class=md-nav__link> Mapper </a> </li> <li class=md-nav__item> <a href=#service class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 条件构造器 </a> <nav class=md-nav aria-label=条件构造器> <ul class=md-nav__list> <li class=md-nav__item> <a href=#conditional class=md-nav__link> Conditional 条件构造器 </a> </li> <li class=md-nav__item> <a href=#query class=md-nav__link> Query 条件构造器 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 示例 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 代码生成器 </a> <nav class=md-nav aria-label=代码生成器> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 快速开始 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 读写分离 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 配置文档 </a> <nav class=md-nav aria-label=配置文档> <ul class=md-nav__list> <li class=md-nav__item> <a href=#baseconfig class=md-nav__link> baseConfig </a> </li> <li class=md-nav__item> <a href=#jdbcconnection class=md-nav__link> jdbcConnection </a> </li> <li class=md-nav__item> <a href=#javamodelgenerator class=md-nav__link> javaModelGenerator </a> </li> <li class=md-nav__item> <a href=#sqlmapgenerator class=md-nav__link> sqlMapGenerator </a> </li> <li class=md-nav__item> <a href=#javaclientgenerator class=md-nav__link> javaClientGenerator </a> </li> <li class=md-nav__item> <a href=#servicegenerator class=md-nav__link> serviceGenerator </a> </li> <li class=md-nav__item> <a href=#controllergenerator class=md-nav__link> controllerGenerator </a> </li> <li class=md-nav__item> <a href=#dtogenerator class=md-nav__link> dtoGenerator </a> </li> <li class=md-nav__item> <a href=#tables class=md-nav__link> tables </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 常见问题 </a> <nav class=md-nav aria-label=常见问题> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tinyint1 class=md-nav__link> TINYINT(1)类型 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 常见异常 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=mybatis>Mybatis 增强<a class=headerlink href=#mybatis title="Permanent link">&para;</a></h1> <blockquote> <p>grus-2021.1.0 开始支持</p> </blockquote> <p><code>code-generator</code>是一个简单的代码生成工具，在不侵入框架底层的前提下，达到简化开发、提高开发效率的目的。</p> <p>此项目分为两个部分：第一个部分为**通用 Mapper 和 Service 提供 CRUD 基本操作的支持**，第二个部分是**代码生成**功能，为表结构变动时提供高效快速生成对应的实体对象。 此项目参考了<a href=http://mybatis.org/generator/ >mybatis-generator</a>和<a href=https://mybatis.plus/ >mybatis-plus</a>, 取其精华并与 grus 框架融合。mybatis-generator 会生成很多冗余代码，而 mybatis-plus 则不用生成冗余代码，功能也很强大，但是其对底层侵入太深，对 mybatis 的 SqlSessionFactory 进行了重写，不能直接集成到我司项目中使用；参考两者优秀之处 code-generator 诞生了，既不需要生成冗余代码，也不需要对底层侵入，使用方便集成快速，适合快速开发，将更多的时间用在业务逻辑上。</p> <h2 id=_1>特性<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <ul> <li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响</li> <li><strong>无损耗</strong>：启动即会自动注入基本增删改查功能，性能无损耗，直接面向对象操作</li> <li><strong>CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li> <li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li> <li><strong>代码生成器</strong>：可快速生成 Entity、Mapper、Service、Controller 层代码，支持自定义模板</li> <li><strong>分页</strong>：基于 MyBatis 物理分页，直接返回 grus 框架封装的分页对象, 同时支持 pagehelper 分页插件</li> </ul> <h2 id=_2>快速开始<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>这里以一个空的工程来示例</p> <p><strong>添加依赖</strong></p> <p>引入 Grus Boot Starter 父工程：</p> <div class=highlight><pre><span></span><code>    <span class=nt>&lt;parent&gt;</span>
        <span class=nt>&lt;groupId&gt;</span>com.ciicgat.grus.boot<span class=nt>&lt;/groupId&gt;</span>
        <span class=nt>&lt;artifactId&gt;</span>grus-boot-starter-parent<span class=nt>&lt;/artifactId&gt;</span>
        <span class=nt>&lt;version&gt;</span>2021.1.0<span class=nt>&lt;/version&gt;</span>
    <span class=nt>&lt;/parent&gt;</span>
</code></pre></div> <p>引入服务端应用常用的依赖</p> <div class=highlight><pre><span></span><code>    <span class=nt>&lt;dependency&gt;</span>
        <span class=nt>&lt;artifactId&gt;</span>grus-boot-starter-server-general<span class=nt>&lt;/artifactId&gt;</span>
        <span class=nt>&lt;groupId&gt;</span>com.ciicgat.grus.boot<span class=nt>&lt;/groupId&gt;</span>
    <span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> <p>引入数据依赖</p> <div class=highlight><pre><span></span><code>    <span class=nt>&lt;dependency&gt;</span>
        <span class=nt>&lt;groupId&gt;</span>com.ciicgat.grus.boot<span class=nt>&lt;/groupId&gt;</span>
        <span class=nt>&lt;artifactId&gt;</span>grus-boot-starter-data<span class=nt>&lt;/artifactId&gt;</span>
    <span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> <p>引入测试依赖</p> <div class=highlight><pre><span></span><code>    <span class=nt>&lt;dependency&gt;</span>
        <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
        <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-test<span class=nt>&lt;/artifactId&gt;</span>
        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
    <span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> <p><strong>配置</strong></p> <p>在<code>application.properties</code>中配置基本信息</p> <div class=highlight><pre><span></span><code><span class=na>spring.application.name</span><span class=o>=</span><span class=s>grus-demo</span>
<span class=na>server.port</span><span class=o>=</span><span class=s>8088</span>
<span class=na>server.tomcat.uri-encoding</span><span class=o>=</span><span class=s>UTF-8</span>
<span class=na>logging.level.com.ciicgat.grusgenerator.codegenerator.example.mapper</span><span class=o>=</span><span class=s>debug</span>
<span class=na>spring.jackson.date-format</span><span class=o>=</span><span class=s>yyyy-MM-dd HH:mm:ss</span>
<span class=na>spring.jackson.time-zone</span><span class=o>=</span><span class=s>GMT+8</span>
<span class=na>grus.feign.log-req</span><span class=o>=</span><span class=s>true</span>
<span class=na>grus.feign.log-resp</span><span class=o>=</span><span class=s>true</span>
<span class=na>mybatis.mapper-locations</span><span class=o>=</span><span class=s>classpath*:mapper/*.xml</span>
</code></pre></div> <p>添加启动类<code>Application.java</code></p> <div class=highlight><pre><span></span><code><span class=nd>@SpringBootApplication</span>
<span class=nd>@MapperScan</span><span class=p>(</span><span class=s>&quot;com.ciicgat.grusgenerator.codegenerator.example.mapper&quot;</span><span class=p>)</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Application</span> <span class=p>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>SpringApplication</span><span class=p>.</span><span class=na>run</span><span class=p>(</span><span class=n>Application</span><span class=p>.</span><span class=na>class</span><span class=p>,</span> <span class=n>args</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p><strong>编码</strong></p> <p>编写实体类<code>ShopTip.java</code></p> <div class=highlight><pre><span></span><code><span class=nd>@TableName</span><span class=p>(</span><span class=s>&quot;ShopTip&quot;</span><span class=p>)</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>ShopTip</span> <span class=p>{</span>
    <span class=nd>@TableId</span>
    <span class=kd>private</span> <span class=n>Long</span> <span class=n>id</span><span class=p>;</span>
    <span class=nd>@TableField</span><span class=p>(</span><span class=n>ignoreSaving</span> <span class=o>=</span> <span class=kc>true</span><span class=p>)</span>
    <span class=kd>private</span> <span class=n>Date</span> <span class=n>timeCreated</span><span class=p>;</span>
    <span class=nd>@TableField</span><span class=p>(</span><span class=n>ignoreSaving</span> <span class=o>=</span> <span class=kc>true</span><span class=p>)</span>
    <span class=kd>private</span> <span class=n>Date</span> <span class=n>timeModified</span><span class=p>;</span>
    <span class=kd>private</span> <span class=n>Long</span> <span class=n>ecappId</span><span class=p>;</span>
    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>type</span><span class=p>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>title</span><span class=p>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>content</span><span class=p>;</span>
    <span class=kd>private</span> <span class=n>Integer</span> <span class=n>enable</span><span class=p>;</span>

  <span class=c1>// 此处忽略 getter setter 方法</span>
<span class=p>}</span>
</code></pre></div> <p>编写 Mapper 类<code>ShopTipMapper.java</code></p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>ShopTipMapper</span> <span class=kd>extends</span> <span class=n>BaseMapper</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=p>{</span>
   <span class=c1>// 如有其他方法直接书写其中即可</span>
   <span class=c1>// ShopTip selectOne(Long id);</span>
<span class=p>}</span>
</code></pre></div> <p>同时也支持<code>@Mapper</code>注解</p> <p><strong>开始使用</strong></p> <p>添加测试类</p> <div class=highlight><pre><span></span><code><span class=nd>@RunWith</span><span class=p>(</span><span class=n>SpringRunner</span><span class=p>.</span><span class=na>class</span><span class=p>)</span>
<span class=nd>@SpringBootTest</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>SampleTest</span> <span class=p>{</span>
    <span class=nd>@Resource</span>
    <span class=kd>private</span> <span class=n>ShopTipMapper</span> <span class=n>shopTipMapper</span><span class=p>;</span>
    <span class=nd>@Test</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>testList</span><span class=p>()</span> <span class=p>{</span>
        <span class=n>Example</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>example</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ConditionExample</span><span class=o>&lt;&gt;</span><span class=p>();</span>
        <span class=n>List</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>shopTipMapper</span><span class=p>.</span><span class=na>list</span><span class=p>(</span><span class=n>example</span><span class=p>);</span>
        <span class=n>Assert</span><span class=p>.</span><span class=na>assertTrue</span><span class=p>(</span><span class=n>list</span><span class=p>.</span><span class=na>size</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>);</span>
        <span class=n>list</span><span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <h2 id=crud>CRUD 接口<a class=headerlink href=#crud title="Permanent link">&para;</a></h2> <h3 id=mapper>Mapper<a class=headerlink href=#mapper title="Permanent link">&para;</a></h3> <p>通用 Mapper 接口：<code>com.ciicgat.sdk.data.mybatis.generator.template.BaseMapper.java</code></p> <p>⚠️ 特别提醒：Mapper 和 xml 中不能重载 BaseMapper 中的方法</p> <p><strong>插入 Insert</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 选择性插入（仅插入非null字段）</span>
<span class=kt>int</span> <span class=nf>insert</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 全字段插入（无论是否为null均进行插入）</span>
<span class=kt>int</span> <span class=nf>insertAll</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 批量全字段插入（注：如表新加字段不为空时插入对象需要手动设置默认值）</span>
<span class=kt>int</span> <span class=nf>batchInsert</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>list</span><span class=p>);</span>
</code></pre></div> <p><strong>删除 Delete</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据ID删除</span>
<span class=kt>int</span> <span class=nf>delete</span><span class=p>(</span><span class=n>Long</span> <span class=n>id</span><span class=p>);</span>
<span class=c1>// 批量ID删除</span>
<span class=kt>int</span> <span class=nf>batchDelete</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;</span> <span class=n>ids</span><span class=p>);</span>
<span class=c1>// 根据条件删除</span>
<span class=kt>int</span> <span class=nf>deleteByExample</span><span class=p>(</span><span class=n>Example</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>example</span><span class=p>);</span>
</code></pre></div> <p><strong>更新 Update</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据ID选择性更新</span>
<span class=kt>int</span> <span class=nf>update</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 根据ID全字段更新 (无论是否为null均进行更新)</span>
<span class=kt>int</span> <span class=nf>updateAll</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 根据条件选择性更新</span>
<span class=kt>int</span> <span class=nf>updateByExample</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>,</span> <span class=n>Example</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>example</span><span class=p>);</span>
<span class=c1>// 根据条件全字段更新</span>
<span class=kt>int</span> <span class=nf>updateByExampleAll</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>,</span> <span class=n>Example</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>example</span><span class=p>);</span>
</code></pre></div> <p><strong>获取 Get</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据ID获取实体</span>
<span class=n>T</span> <span class=nf>get</span><span class=p>(</span><span class=n>Long</span> <span class=n>id</span><span class=p>);</span>
<span class=c1>// 批量获取实体</span>
<span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>batchGet</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;</span> <span class=n>ids</span><span class=p>);</span>
<span class=c1>// 根据条件获取实体</span>
<span class=n>T</span> <span class=nf>getByExample</span><span class=p>(</span><span class=n>Example</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>example</span><span class=p>);</span>
</code></pre></div> <p><strong>查询数量 Count</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据条件数量查询</span>
<span class=kt>int</span> <span class=nf>count</span><span class=p>(</span><span class=n>Example</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>example</span><span class=p>);</span>
</code></pre></div> <p><strong>查询列表 List</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据条件列表查询</span>
<span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>list</span><span class=p>(</span><span class=n>Example</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>example</span><span class=p>);</span>
</code></pre></div> <p>注：<code>Example</code>和<code>Query</code>都继承于<code>Conditional</code>, 在不同层面使用不同的接口：</p> <ul> <li>mapper 层: <code>Example</code> -&gt; <code>ConditionExample</code></li> <li>service 层: Query -&gt; <code>QueryExample</code> , <code>PageQueryExample</code></li> </ul> <p>示例</p> <div class=highlight><pre><span></span><code><span class=c1>// mapper: Example</span>
<span class=n>Example</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>example</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ConditionExample</span><span class=o>&lt;&gt;</span><span class=p>();</span>
<span class=n>userMapper</span><span class=p>.</span><span class=na>getByExample</span><span class=p>(</span><span class=n>example</span><span class=p>);</span>

<span class=c1>// service: Query</span>
<span class=n>Query</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>query</span> <span class=o>=</span> <span class=k>new</span> <span class=n>QueryExample</span><span class=o>&lt;&gt;</span><span class=p>();</span>
<span class=n>userService</span><span class=p>.</span><span class=na>getByExample</span><span class=p>(</span><span class=n>query</span><span class=p>);</span>

<span class=n>Query</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>query1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>PageQueryExample</span><span class=o>&lt;&gt;</span><span class=p>();</span>
<span class=n>userService</span><span class=p>.</span><span class=na>page</span><span class=p>(</span><span class=n>query1</span><span class=p>);</span>
</code></pre></div> <h3 id=service>Service<a class=headerlink href=#service title="Permanent link">&para;</a></h3> <p>通用 Service 接口：<code>com.ciicgat.sdk.data.mybatis.generator.template.BaseService.java</code></p> <p>⚠️ 特别提醒：继承 BaseService 前提需要对应的 Mapper 继承 BaseMapper</p> <p><strong>插入 Insert</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 选择性插入（仅插入非null字段）</span>
<span class=kt>int</span> <span class=nf>insert</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 全字段插入（无论是否为null均进行插入）</span>
<span class=kt>int</span> <span class=nf>insertAll</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 批量全字段插入（注：如表新加字段不为空时插入对象需要手动设置默认值）</span>
<span class=kt>int</span> <span class=nf>batchInsert</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>list</span><span class=p>);</span>
</code></pre></div> <p><strong>删除 Delete</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据ID删除</span>
<span class=kt>int</span> <span class=nf>delete</span><span class=p>(</span><span class=n>Long</span> <span class=n>id</span><span class=p>);</span>
<span class=c1>// 批量ID删除</span>
<span class=kt>int</span> <span class=nf>batchDelete</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;</span> <span class=n>ids</span><span class=p>);</span>
<span class=c1>// 根据条件删除</span>
<span class=kt>int</span> <span class=nf>deleteByExample</span><span class=p>(</span><span class=n>Query</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>query</span><span class=p>);</span>
</code></pre></div> <p><strong>更新 Update</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据ID选择性更新</span>
<span class=kt>int</span> <span class=nf>update</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 根据ID全字段更新 (无论是否为null均进行更新)</span>
<span class=kt>int</span> <span class=nf>updateAll</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 根据条件选择性更新</span>
<span class=kt>int</span> <span class=nf>updateByExample</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>,</span> <span class=n>Query</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>query</span><span class=p>);</span>
<span class=c1>// 根据条件全字段更新</span>
<span class=kt>int</span> <span class=nf>updateByExampleAll</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>,</span> <span class=n>Query</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>query</span><span class=p>);</span>
</code></pre></div> <p><strong>保存 Save</strong></p> <blockquote> <p><code>entity.id == null</code> -&gt; 插入</p> <p><code>entity.id != null</code> -&gt; 更新</p> </blockquote> <div class=highlight><pre><span></span><code><span class=c1>// 选择性保存</span>
<span class=kt>int</span> <span class=nf>save</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 全字段保存</span>
<span class=kt>int</span> <span class=nf>saveAll</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
</code></pre></div> <p><strong>获取 Get</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据ID获取实体</span>
<span class=n>T</span> <span class=nf>get</span><span class=p>(</span><span class=n>Long</span> <span class=n>id</span><span class=p>);</span>
<span class=c1>// 批量获取实体</span>
<span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>batchGet</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;</span> <span class=n>ids</span><span class=p>);</span>
<span class=c1>// 根据条件获取实体</span>
<span class=n>T</span> <span class=nf>getByExample</span><span class=p>(</span><span class=n>Query</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>query</span><span class=p>);</span>
</code></pre></div> <p><strong>查询数量 Count</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据条件数量查询</span>
<span class=kt>int</span> <span class=nf>count</span><span class=p>(</span><span class=n>Query</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>query</span><span class=p>);</span>
</code></pre></div> <p><strong>查询列表 List</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据条件列表查询</span>
<span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>list</span><span class=p>(</span><span class=n>Query</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>query</span><span class=p>);</span>
</code></pre></div> <p><strong>查询分页 Page</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 根据条件查询分页</span>
<span class=n>Pagination</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>page</span><span class=p>(</span><span class=n>PageQueryExample</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>query</span><span class=p>);</span>
</code></pre></div> <h2 id=_3>条件构造器<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <blockquote> <ul> <li>不建议将带条件构造器的接口直接暴露出去，应写一个 DTO 进行传输</li> <li>以下方法入参中的<code>R column</code>均表示数据库字段</li> </ul> </blockquote> <h3 id=conditional>Conditional 条件构造器<a class=headerlink href=#conditional title="Permanent link">&para;</a></h3> <p><strong>创建并且条件</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 创建条件: 如果条件列表为空则默认放入, 否则不放入</span>
<span class=n>Criteria</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>createCriteria</span><span class=p>();</span>
<span class=c1>// 创建Lambda条件: 如果条件列表为空则默认放入, 否则不放入</span>
<span class=n>LambdaCriteria</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>createLambdaCriteria</span><span class=p>();</span>
</code></pre></div> <p><strong>创建或者条件</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 设置或者条件</span>
<span class=kt>void</span> <span class=nf>or</span><span class=p>(</span><span class=n>GeneratedCriteria</span> <span class=n>criteria</span><span class=p>);</span>
<span class=c1>// 创建或者条件, 并放入条件列表</span>
<span class=n>Criteria</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>or</span><span class=p>();</span>
</code></pre></div> <p><strong>其他接口</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 清除条件和设置值</span>
<span class=kt>void</span> <span class=nf>clear</span><span class=p>();</span>
<span class=c1>// 设置是否去重</span>
<span class=kt>void</span> <span class=nf>setDistinct</span><span class=p>(</span><span class=kt>boolean</span> <span class=n>distinct</span><span class=p>);</span>
<span class=c1>// 设置offset: limit ${offset}, ${limit}</span>
<span class=kt>void</span> <span class=nf>setLimitStart</span><span class=p>(</span><span class=kt>int</span> <span class=n>limitStart</span><span class=p>);</span>
<span class=c1>// 设置limit: limit ${offset}, ${limit}</span>
<span class=kt>void</span> <span class=nf>setLimitEnd</span><span class=p>(</span><span class=kt>int</span> <span class=n>limitEnd</span><span class=p>);</span>
<span class=c1>// 添加排序，如未添加排序，则默认排序是id DESC</span>
<span class=kt>void</span> <span class=nf>addOrderBy</span><span class=p>(</span><span class=n>String</span> <span class=n>columnName</span><span class=p>,</span> <span class=kt>boolean</span> <span class=n>isAsc</span><span class=p>);</span>
</code></pre></div> <h3 id=query>Query 条件构造器<a class=headerlink href=#query title="Permanent link">&para;</a></h3> <blockquote> <p>继承于 Conditional</p> </blockquote> <p><strong>设置查询实体</strong></p> <div class=highlight><pre><span></span><code><span class=c1>// 设置实体: 将所有非空字段加入eq条件列表</span>
<span class=kt>void</span> <span class=nf>setEntity</span><span class=p>(</span><span class=n>T</span> <span class=n>entity</span><span class=p>);</span>
<span class=c1>// 此方法可与Criteria条件叠加使用</span>
</code></pre></div> <p><strong>Criteria 条件</strong></p> <p><strong>eq</strong></p> <div class=highlight><pre><span></span><code><span class=n>eq</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>等于 =</li> <li>例: <code>eq("name", "老王")</code>---&gt;<code>name = '老王'</code></li> </ul> <p><strong>ne</strong></p> <div class=highlight><pre><span></span><code><span class=n>ne</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>不等于 &lt;&gt;</li> <li>例: <code>ne("name", "老王")</code>---&gt;<code>name &lt;&gt; '老王'</code></li> </ul> <p><strong>gt</strong></p> <div class=highlight><pre><span></span><code><span class=n>gt</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>大于 &gt;</li> <li>例: <code>gt("age", 18)</code>---&gt;<code>age &gt; 18</code></li> </ul> <p><strong>ge</strong></p> <div class=highlight><pre><span></span><code><span class=n>ge</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>大于等于 &gt;=</li> <li>例: <code>ge("age", 18)</code>---&gt;<code>age &gt;= 18</code></li> </ul> <p><strong>lt</strong></p> <div class=highlight><pre><span></span><code><span class=n>lt</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>小于 &lt;</li> <li>例: <code>lt("age", 18)</code>---&gt;<code>age &lt; 18</code></li> </ul> <p><strong>le</strong></p> <div class=highlight><pre><span></span><code><span class=n>le</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>小于等于 &lt;=</li> <li>例: <code>le("age", 18)</code>---&gt;<code>age &lt;= 18</code></li> </ul> <p><strong>between</strong></p> <div class=highlight><pre><span></span><code><span class=n>between</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val1</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val2</span><span class=p>)</span>
</code></pre></div> <ul> <li>BETWEEN 值 1 AND 值 2</li> <li>例: <code>between("age", 18, 30)</code>---&gt;<code>age between 18 and 30</code></li> </ul> <p><strong>notBetween</strong></p> <div class=highlight><pre><span></span><code><span class=n>notBetween</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val1</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val2</span><span class=p>)</span>
</code></pre></div> <ul> <li>NOT BETWEEN 值 1 AND 值 2</li> <li>例: <code>notBetween("age", 18, 30)</code>---&gt;<code>age not between 18 and 30</code></li> </ul> <p><strong>like</strong></p> <div class=highlight><pre><span></span><code><span class=n>like</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>LIKE '%值%'</li> <li>例: <code>like("name", "王")</code>---&gt;<code>name like '%王%'</code></li> </ul> <p><strong>notLike</strong></p> <div class=highlight><pre><span></span><code><span class=n>notLike</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>NOT LIKE '%值%'</li> <li>例: <code>notLike("name", "王")</code>---&gt;<code>name not like '%王%'</code></li> </ul> <p><strong>likeLeft</strong></p> <div class=highlight><pre><span></span><code><span class=n>likeLeft</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>LIKE '%值'</li> <li>例: <code>likeLeft("name", "王")</code>---&gt;<code>name like '%王'</code></li> </ul> <p><strong>likeRight</strong></p> <div class=highlight><pre><span></span><code><span class=n>likeRight</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span> <span class=n>val</span><span class=p>)</span>
</code></pre></div> <ul> <li>LIKE '值%'</li> <li>例: <code>likeRight("name", "王")</code>---&gt;<code>name like '王%'</code></li> </ul> <p><strong>isNull</strong></p> <div class=highlight><pre><span></span><code><span class=n>isNull</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>)</span>
</code></pre></div> <ul> <li>字段 IS NULL</li> <li>例: <code>isNull("name")</code>---&gt;<code>name is null</code></li> </ul> <p><strong>isNotNull</strong></p> <div class=highlight><pre><span></span><code><span class=n>isNotNull</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>)</span>
</code></pre></div> <ul> <li>字段 IS NOT NULL</li> <li>例: <code>isNotNull("name")</code>---&gt;<code>name is not null</code></li> </ul> <p><strong>in</strong></p> <div class=highlight><pre><span></span><code><span class=n>in</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>value</span><span class=p>)</span>
</code></pre></div> <ul> <li>字段 IN (value.get(0), value.get(1), ...)</li> <li>例: <code>in("age",{1,2,3})</code>---&gt;<code>age in (1,2,3)</code></li> </ul> <div class=highlight><pre><span></span><code><span class=n>in</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span><span class=p>...</span> <span class=n>values</span><span class=p>)</span>
</code></pre></div> <ul> <li>字段 IN (v0, v1, ...)</li> <li>例: <code>in("age", 1, 2, 3)</code>---&gt;<code>age in (1,2,3)</code></li> </ul> <p><strong>notIn</strong></p> <div class=highlight><pre><span></span><code><span class=n>notIn</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>value</span><span class=p>)</span>
</code></pre></div> <ul> <li>字段 NOT IN (value.get(0), value.get(1), ...)</li> <li>例: <code>notIn("age",{1,2,3})</code>---&gt;<code>age not in (1,2,3)</code></li> </ul> <div class=highlight><pre><span></span><code><span class=n>notIn</span><span class=p>(</span><span class=n>R</span> <span class=n>column</span><span class=p>,</span> <span class=n>Object</span><span class=p>...</span> <span class=n>values</span><span class=p>)</span>
</code></pre></div> <ul> <li>字段 NOT IN (v0, v1, ...)</li> <li>例: <code>notIn("age", 1, 2, 3)</code>---&gt;<code>age not in (1,2,3)</code></li> </ul> <hr> <h3 id=_4>示例<a class=headerlink href=#_4 title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=c1>// 创建条件构造器</span>
<span class=n>Example</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>example</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ConditionExample</span><span class=o>&lt;&gt;</span><span class=p>();</span>
<span class=c1>// 创建第一个条件：id in (1,2,3) and type is not null</span>
<span class=n>example</span><span class=p>.</span><span class=na>createCriteria</span><span class=p>().</span><span class=na>in</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>).</span><span class=na>isNotNull</span><span class=p>(</span><span class=s>&quot;type&quot;</span><span class=p>);</span>
<span class=c1>// 创建第二个条件： 因为第二个条件起不会默认放入条件列表, title like %关爱通%</span>
<span class=n>LambdaCriteria</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>criteria</span> <span class=o>=</span> <span class=n>example</span><span class=p>.</span><span class=na>createLambdaCriteria</span><span class=p>().</span><span class=na>like</span><span class=p>(</span><span class=n>ShopTip</span><span class=p>::</span><span class=n>getTitle</span><span class=p>,</span> <span class=s>&quot;关爱通&quot;</span><span class=p>);</span>
<span class=c1>// 将第二个条件设置为或者条件</span>
<span class=n>example</span><span class=p>.</span><span class=na>or</span><span class=p>(</span><span class=n>criteria</span><span class=p>);</span>
<span class=c1>// 创建第三个或者条件：timeCreated between &#39;2020-09-11&#39; and &#39;2020-11-11&#39;</span>
<span class=n>example</span><span class=p>.</span><span class=na>orLambdaCriteria</span><span class=p>().</span><span class=na>between</span><span class=p>(</span><span class=n>ShopTip</span><span class=p>::</span><span class=n>getTimeCreated</span><span class=p>,</span> <span class=s>&quot;2020-09-11&quot;</span><span class=p>,</span> <span class=s>&quot;2020-11-11&quot;</span><span class=p>);</span>
<span class=c1>// 设置去重</span>
<span class=n>example</span><span class=p>.</span><span class=na>setDistinct</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
<span class=c1>// 添加排序</span>
<span class=n>example</span><span class=p>.</span><span class=na>addOrderBy</span><span class=p>(</span><span class=s>&quot;title&quot;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
<span class=n>example</span><span class=p>.</span><span class=na>addOrderBy</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span>
<span class=n>List</span><span class=o>&lt;</span><span class=n>ShopTip</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>shopTipMapper</span><span class=p>.</span><span class=na>list</span><span class=p>(</span><span class=n>example</span><span class=p>);</span>
<span class=c1>// 以上条件构造的SQL语句为：</span>
<span class=cm>/*</span>
<span class=cm>  SELECT DISTINCT `id`,`timeCreated`,`timeModified`,`ecappId`,`type`,`title`,`content`,`enable`</span>
<span class=cm>  FROM `ShopTip`</span>
<span class=cm>  WHERE ( `id` IN ( 1 , 2 , 3 ) and `type` IS NOT NULL )</span>
<span class=cm>  OR ( `title` LIKE CONCAT(&#39;%&#39;,&#39;关爱通&#39;,&#39;%&#39;) )</span>
<span class=cm>  OR ( `timeCreated` BETWEEN &#39;2020-09-11&#39; and &#39;2020-11-11&#39; )</span>
<span class=cm>  ORDER BY `title` ASC, `id` DESC;</span>
<span class=cm> */</span>
</code></pre></div> <h2 id=_5>代码生成器<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>快速生成 Entity、Mapper、Mapper XML、Service、Controller 等各个模块的代码，极大的提升了开发效率</p> <p>关于覆盖:</p> <ul> <li>Entity 文件: Entity 是与数据库表结构保持一致的, 尽量不要去修改, 如需扩展请添加 Bean 去继承它, 所以每次生成都会覆盖 Entity</li> <li>其他文件: 其他文件一次生成之后可以添加自己的方法, 所以每次生成不会覆盖</li> </ul> <h3 id=_6>快速开始<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p>在前面那个项目上添加代码生成器</p> <p><strong>添加依赖</strong></p> <p>引入代码生成器，<code>scope</code>设置为<code>test</code></p> <div class=highlight><pre><span></span><code>    <span class=nt>&lt;dependency&gt;</span>
        <span class=nt>&lt;groupId&gt;</span>com.ciicgat.grusgenerator<span class=nt>&lt;/groupId&gt;</span>
        <span class=nt>&lt;artifactId&gt;</span>grus-generator<span class=nt>&lt;/artifactId&gt;</span>
        <span class=nt>&lt;version&gt;</span>${latest.version}<span class=nt>&lt;/version&gt;</span>
        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
    <span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> <p><strong>配置</strong></p> <p>添加生成配置文件<code>code-generator.xml</code>, 建议放到测试资源目录</p> <div class=highlight><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class=cp>&lt;!DOCTYPE code-generator PUBLIC &quot;-//guanaitong.com//DTD CodeGenerator 1.0//EN&quot;</span>
<span class=cp>        &quot;https://e.guanaitong.com/manual/code-generator.dtd&quot;&gt;</span>

<span class=nt>&lt;code-generator&gt;</span>
    <span class=c>&lt;!--基础配置--&gt;</span>
    <span class=nt>&lt;baseConfig&gt;</span>
        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&quot;enableSwagger&quot;</span><span class=nt>&gt;</span>true<span class=nt>&lt;/property&gt;</span>
        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&quot;enableValidation&quot;</span><span class=nt>&gt;</span>true<span class=nt>&lt;/property&gt;</span>
    <span class=nt>&lt;/baseConfig&gt;</span>

    <span class=c>&lt;!--数据库连接--&gt;</span>
    <span class=nt>&lt;jdbcConnection</span> <span class=na>driverClass=</span><span class=s>&quot;com.mysql.cj.jdbc.Driver&quot;</span>
                    <span class=na>host=</span><span class=s>&quot;mdb.servers.dev.ofc&quot;</span>
                    <span class=na>database=</span><span class=s>&quot;robin_example&quot;</span>
                    <span class=na>username=</span><span class=s>&quot;amy&quot;</span>
                    <span class=na>password=</span><span class=s>&quot;1qazxsw@&quot;</span><span class=nt>/&gt;</span>

    <span class=c>&lt;!-- 生成实体文件 --&gt;</span>
    <span class=nt>&lt;javaModelGenerator</span> <span class=na>targetPackage=</span><span class=s>&quot;com.ciicgat.grusgenerator.cg.example.bean.entity&quot;</span>
                        <span class=na>codePath=</span><span class=s>&quot;src/main/java&quot;</span><span class=nt>/&gt;</span>

    <span class=c>&lt;!-- 生成Mapper的映射XML文件 --&gt;</span>
    <span class=nt>&lt;sqlMapGenerator</span> <span class=na>targetPackage=</span><span class=s>&quot;mapper&quot;</span>
                     <span class=na>codePath=</span><span class=s>&quot;src/main/resources&quot;</span><span class=nt>/&gt;</span>

    <span class=c>&lt;!-- 生成Mapper的类文件 --&gt;</span>
    <span class=nt>&lt;javaClientGenerator</span> <span class=na>targetPackage=</span><span class=s>&quot;com.ciicgat.grusgenerator.cg.example.mapper&quot;</span>
                         <span class=na>codePath=</span><span class=s>&quot;src/main/java&quot;</span><span class=nt>/&gt;</span>

    <span class=c>&lt;!-- 生成Service文件 --&gt;</span>
    <span class=nt>&lt;serviceGenerator</span> <span class=na>targetPackage=</span><span class=s>&quot;com.ciicgat.grusgenerator.cg.example.service&quot;</span>
                      <span class=na>codePath=</span><span class=s>&quot;src/main/java&quot;</span><span class=nt>/&gt;</span>

    <span class=c>&lt;!-- 生成Controller文件 --&gt;</span>
    <span class=nt>&lt;controllerGenerator</span> <span class=na>targetPackage=</span><span class=s>&quot;com.ciicgat.grusgenerator.cg.example.controller&quot;</span>
                         <span class=na>codePath=</span><span class=s>&quot;src/main/java&quot;</span><span class=nt>/&gt;</span>
      <span class=c>&lt;!-- 生成DTO文件 --&gt;</span>
    <span class=nt>&lt;dtoGenerator</span> <span class=na>targetPackage=</span><span class=s>&quot;com.ciicgat.grusgenerator.test.cg.generated.dto&quot;</span>
                        <span class=na>codePath=</span><span class=s>&quot;src/test/java&quot;</span> <span class=na>suffix=</span><span class=s>&quot;VO&quot;</span><span class=nt>/&gt;</span>

    <span class=c>&lt;!--需要生成的表--&gt;</span>
    <span class=nt>&lt;tables</span> <span class=na>entityObjectSuffix=</span><span class=s>&quot;DO&quot;</span><span class=nt>&gt;</span>
      <span class=nt>&lt;table</span> <span class=na>tableName=</span><span class=s>&quot;User&quot;</span><span class=nt>/&gt;</span>
    <span class=nt>&lt;/tables&gt;</span>

<span class=nt>&lt;/code-generator&gt;</span>
</code></pre></div> <blockquote> <p>配置的详细说明见下文 - 配置文档</p> </blockquote> <p><strong>开始使用</strong></p> <p>创建生成测试单元测试文件<code>CodeGeneratorTest.java</code></p> <div class=highlight><pre><span></span><code><span class=kd>public</span> <span class=kd>class</span> <span class=nc>CodeGeneratorTest</span> <span class=p>{</span>
    <span class=nd>@Test</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>generate</span><span class=p>()</span> <span class=p>{</span>
        <span class=n>CodeGenerator</span><span class=p>.</span><span class=na>builder</span><span class=p>().</span><span class=na>build</span><span class=p>().</span><span class=na>generate</span><span class=p>();</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>注：配置文件名为<code>code-generator.xml</code>时无需指定配置文件路径，否则需要指定<code>configFilePath</code></p> <h3 id=_7>读写分离<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <p>目前读写分离关爱通的读写分离是基于主从库的<code>SqlSessionTemplate</code>来实现的，目前项目中用读写分离的方法是创建一个<code>BaseDao</code>其中注入<code>readSqlSessionTemplate</code>和<code>writeSqlSessionTemplate</code>, 写 Mapper 的实现类，在其中使用对应的 SqlSessionTemplate 执行 Statment，为了保证读写分离操作的灵活性，code-generator 也沿用此使用习惯，使用<code>ReadWriteSeparationMapperImpl</code>中的增删改查方法是读写分离的。</p> <p><strong>使用</strong></p> <ol> <li>配置文件<code>application.properties</code>添加读写分离的配置</li> </ol> <div class=highlight><pre><span></span><code><span class=na>grus.db.read-write-separation</span><span class=o>=</span><span class=s>true</span>
</code></pre></div> <ol> <li>创建 Mapper 实现类，继承<code>ReadWriteSeparationMapperImpl</code>，添加注解<code>@Repository</code>,<code>@Primary</code></li> </ol> <div class=highlight><pre><span></span><code><span class=nd>@Repository</span>
<span class=nd>@Primary</span> <span class=c1>// 说明①</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>TemplateMapperImpl</span> <span class=kd>extends</span> <span class=n>ReadWriteSeparationMapperImpl</span><span class=o>&lt;</span><span class=n>Template</span><span class=o>&gt;</span> <span class=kd>implements</span> <span class=n>TemplateMapper</span> <span class=p>{</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Template</span> <span class=nf>getById</span><span class=p>(</span><span class=n>Long</span> <span class=n>id</span><span class=p>)</span> <span class=p>{</span>
      <span class=c1>// 说明②</span>
        <span class=c1>// return readSqlSessionTemplate.selectOne(&quot;com.ciicgat.grusgenerator.codegenerator.example.mapper.TemplateMapper.getById&quot;, id);</span>
        <span class=k>return</span> <span class=n>readSqlSessionTemplate</span><span class=p>.</span><span class=na>selectOne</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>getStatement</span><span class=p>(</span><span class=s>&quot;getById&quot;</span><span class=p>),</span> <span class=n>id</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <ol> <li>Mapper.xml 中添加自定义 SQL</li> </ol> <div class=highlight><pre><span></span><code><span class=nt>&lt;select</span> <span class=na>id=</span><span class=s>&quot;getById&quot;</span> <span class=na>resultType=</span><span class=s>&quot;com.ciicgat.grusgenerator.cg.example.bean.entity.Template&quot;</span><span class=nt>&gt;</span>
  select * from Template where id=#{id}
<span class=nt>&lt;/select&gt;</span>
</code></pre></div> <ol> <li>调用处</li> </ol> <div class=highlight><pre><span></span><code><span class=nd>@Service</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>TemplateServiceImpl</span> <span class=kd>extends</span> <span class=n>BaseServiceImpl</span><span class=o>&lt;</span><span class=n>Template</span><span class=o>&gt;</span> <span class=kd>implements</span> <span class=n>TemplateService</span> <span class=p>{</span>

    <span class=c1>// 说明③</span>
    <span class=c1>// @Resource(name = &quot;templateMapperImpl&quot;)</span>
    <span class=nd>@Autowired</span>
    <span class=kd>private</span> <span class=n>TemplateMapper</span> <span class=n>templateMapper</span><span class=p>;</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Template</span> <span class=nf>getById</span><span class=p>(</span><span class=n>Long</span> <span class=n>id</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>return</span> <span class=n>templateMapper</span><span class=p>.</span><span class=na>getById</span><span class=p>(</span><span class=n>id</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>说明：</p> <ul> <li>① 由于存在默认实现的<code>BaseServiceImpl</code>中会自动注入一个 TemplateMapper 的代理实例，所以增加 TemplateMapper 的实现类时需要用<code>@Primary</code>标注其为主要的，否则启动时 spring 会报错无法确认哪个实现类来注入</li> <li>② 由于生成的 Mapper.xml 中的<code>namespace</code>是完整 Mapper 的路径，所以这边写 statement 时也需要写完整路径才能找到，为了简便封装了<code>getStatement</code>方法，所以直接用它即可简化调用</li> <li>③ 由于<code>@Autowired</code>默认是按类型类自动装载，而<code>@Resource</code>默认是按名称来注入，而此时<code>TemplateMapper</code>存在 2 个实例，如果使用<code>@Resource</code>时需要指定名称，因为<code>@Primary</code>仅对<code>@Autowired</code>有效</li> </ul> <p><strong>代码生成</strong></p> <p>生成配置文件(<code>code-generator.xml</code>)的基础配置(<code>baseConfig</code>)中启用读写分离</p> <div class=highlight><pre><span></span><code><span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&quot;enableReadWriteSeparation&quot;</span><span class=nt>&gt;</span>true<span class=nt>&lt;/property&gt;</span>
</code></pre></div> <p>添加以上配置后生成的代码包含读写分离 Mapper 实现类，代码位置在<code>mapper.impl</code>包下</p> <h2 id=_8>配置文档<a class=headerlink href=#_8 title="Permanent link">&para;</a></h2> <p><code>code-generator</code> 作为根元素，配置从此元素开始，以下说明下各个元素的含义与参数。</p> <h3 id=baseconfig>baseConfig<a class=headerlink href=#baseconfig title="Permanent link">&para;</a></h3> <p><strong>property 属性</strong></p> <ul> <li><strong>enableSwagger</strong> 启用 Swagger，在生成的 DTO 和 Controller 中使用 Swagger 注解</li> <li><strong>enableValidation</strong> 启用验证，在生成的 DTO 和 Controller 中使用验证注解，根据数据库表字段添加<a class="magiclink magiclink-github magiclink-mention" href=https://github.com/NotNull title="GitHub User: NotNull">@NotNull</a>,<a class="magiclink magiclink-github magiclink-mention" href=https://github.com/Length title="GitHub User: Length">@Length</a> 注解</li> <li><strong>enableReadWriteSeparation</strong> 启用读写分离，生成读写分离对应的代码</li> <li><strong>disableUpdatingMapperXml</strong> 禁用更新<code>MapperXml</code>文件，每次生成会同步更新 mapper 中<code>id=BaseColumnList</code>和<code>id=BaseResultMap</code>内容，如果不需要更新此项设置为 true 禁用更新</li> <li><strong>enableMapperAnnotation</strong> 在生成的 Mapper.java 中添加<a class="magiclink magiclink-github magiclink-mention" href=https://github.com/Mapper title="GitHub User: Mapper">@Mapper</a> 注解，默认不启用</li> </ul> <h3 id=jdbcconnection>jdbcConnection<a class=headerlink href=#jdbcconnection title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>属性</th> <th>名称</th> <th>是否必填</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>driverClass</td> <td>驱动类</td> <td>是</td> <td>jdbc 驱动类全路径</td> </tr> <tr> <td>host</td> <td>主机地址</td> <td>是</td> <td>数据库主机地址,如非默认端口<code>3306</code>需带上端口号</td> </tr> <tr> <td>database</td> <td>数据库</td> <td>是</td> <td>数据库名称</td> </tr> <tr> <td>username</td> <td>用户名</td> <td>是</td> <td>数据库用户名</td> </tr> <tr> <td>password</td> <td>密码</td> <td>是</td> <td>用户名密码</td> </tr> <tr> <td>tinyInt1isBit</td> <td>tinyint 转换</td> <td>否</td> <td>默认为 true, tinyint(1)类型转 Boolean; 为 false 时，tinyint(1)类型转为 Integer</td> </tr> </tbody> </table> <h3 id=javamodelgenerator>javaModelGenerator<a class=headerlink href=#javamodelgenerator title="Permanent link">&para;</a></h3> <p>实体对象生成器</p> <table> <thead> <tr> <th>属性</th> <th>名称</th> <th>是否必填</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>targetPackage</td> <td>包路径</td> <td>是</td> <td>文件所在的包全路径(小数点分隔的包名)</td> </tr> <tr> <td>codePath</td> <td>代码地址</td> <td>是</td> <td>文件所在相对项目根目录的路径</td> </tr> <tr> <td>disabled</td> <td>是否禁用</td> <td>否</td> <td>禁用时，将跳过此模块生成</td> </tr> <tr> <td>templatePath</td> <td>自定义模板路径</td> <td>否</td> <td>模板路径是相对路径，需放于 resources 下，同名即覆盖，不同名需指定路径</td> </tr> <tr> <td>suffix</td> <td>自定义后缀</td> <td>否</td> <td>为生成的模块指定固定后缀，此属性对 Entity 不生效，Entity 自定义后缀参考 table 标签</td> </tr> </tbody> </table> <p>注：如果需要自定义代码模板，需要从默认模板复制一份到本地项目进行修改，复制后选择**无格式粘贴**，否则格式会混乱</p> <p>默认模板文件路径</p> <ul> <li><strong>entity</strong> templates/entity.java.ftl</li> <li><strong>mapperXml</strong> templates/mapper.xml.ftl</li> <li><strong>mapperJava</strong> templates/mapper.java.ftl</li> <li><strong>service</strong> templates/service.java.ftl</li> <li><strong>serviceImpl</strong> templates/serviceimpl.java.ftl</li> <li><strong>controller</strong> templates/controller.java.ftl</li> <li><strong>dto</strong> templates/dto.java.ftl</li> </ul> <h3 id=sqlmapgenerator>sqlMapGenerator<a class=headerlink href=#sqlmapgenerator title="Permanent link">&para;</a></h3> <p>XMLMapper 生成器，配置同上，默认后缀<code>Mapper</code></p> <h3 id=javaclientgenerator>javaClientGenerator<a class=headerlink href=#javaclientgenerator title="Permanent link">&para;</a></h3> <p>JavaMapper 生成器，配置同上，默认后缀<code>Mapper</code></p> <h3 id=servicegenerator>serviceGenerator<a class=headerlink href=#servicegenerator title="Permanent link">&para;</a></h3> <p>Service 生成器，配置同上，默认后缀<code>Service</code></p> <h3 id=controllergenerator>controllerGenerator<a class=headerlink href=#controllergenerator title="Permanent link">&para;</a></h3> <p>Controller 生成器，配置同上，默认后缀<code>Controller</code></p> <h3 id=dtogenerator>dtoGenerator<a class=headerlink href=#dtogenerator title="Permanent link">&para;</a></h3> <p>controller 入参 dto 的生成器，用于对象转换，配置同上。该元素依附于 controllerGenerator，若生成 controller 需要配置此项，默认后缀<code>DTO</code>。</p> <h3 id=tables>tables<a class=headerlink href=#tables title="Permanent link">&para;</a></h3> <p>要生成的表集合</p> <table> <thead> <tr> <th>属性</th> <th>名称</th> <th>是否必填</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>all</td> <td>是否所有表</td> <td>否</td> <td>为 true 时，将读取数据库所有表, 将忽略其所有<code>table</code>子元素</td> </tr> <tr> <td>ignoreColumns</td> <td>忽略的列</td> <td>否</td> <td>所有表需要忽略的列</td> </tr> <tr> <td>createTimeColumn</td> <td>创建时间字段</td> <td>否</td> <td>默认为<code>timeCreated</code></td> </tr> <tr> <td>updateTimeColumn</td> <td>更新时间字段</td> <td>否</td> <td>默认为<code>timeModified</code></td> </tr> <tr> <td>entityObjectSuffix</td> <td>实体后缀</td> <td>否</td> <td>给生成的实体加上统一后缀, 如 <code>DO</code> -&gt; UserDO</td> </tr> </tbody> </table> <p><strong>table 要生成的表</strong></p> <table> <thead> <tr> <th>属性</th> <th>名称</th> <th>是否必填</th> <th>描述</th> </tr> </thead> <tbody> <tr> <td>tableName</td> <td>表名</td> <td>是</td> <td>表名</td> </tr> <tr> <td>entityObjectName</td> <td>实体对象名</td> <td>否</td> <td>如果为空，则以表名大写驼峰作为实体对象名</td> </tr> <tr> <td>ignoreColumns</td> <td>忽略的列</td> <td>否</td> <td>此表需要忽略的列</td> </tr> </tbody> </table> <p>注：</p> <ul> <li>忽略的列将不在生成的 Entity 中展示，一般为不需要操作的可空列，<code>table</code>的<code>ignoreColumns</code>属性会继承<code>tables</code>的</li> <li><code>entityObjectSuffix</code>和<code>entityObjectName</code>都存在时，生成的实体名为<code>${entityObjectName}${entityObjectSuffix}</code></li> </ul> <h2 id=_9>常见问题<a class=headerlink href=#_9 title="Permanent link">&para;</a></h2> <h3 id=tinyint1>TINYINT(1)类型<a class=headerlink href=#tinyint1 title="Permanent link">&para;</a></h3> <p>1 个长度的 tinyint 为什么转为 Boolean 类型而不是 Integer？</p> <blockquote> <p>Mysql 官方参考文档关于布尔类型的说明：BOO, BOOLEAN These types are synonyms(同义词) for TINYINT(1). A value of zero is considered(认为是) false. Nonzero(不为 0) values are considered true.</p> </blockquote> <p>解决方法：</p> <ol> <li>如果需要将 tinyint(1)转为 Integer 类型需要将配置文件中<code>jdbcConnection</code>的<code>tinyInt1isBit</code>属性显式设置为<code>false</code></li> <li>将数据表 tinyint(1)改为 tinyint(2)</li> </ol> <p>注：tinyint(1) 如果加了<code>unsigned</code>则 jdbc 读取到的长度是 3，对应转换为 Integer 类型</p> <h3 id=_10>常见异常<a class=headerlink href=#_10 title="Permanent link">&para;</a></h3> <ul> <li>Mapped Statements collection already contains value for</li> </ul> <div class=highlight><pre><span></span><code><span class=n>java</span><span class=p>.</span><span class=na>lang</span><span class=p>.</span><span class=na>IllegalArgumentException</span><span class=p>:</span> <span class=n>Mapped</span> <span class=n>Statements</span> <span class=n>collection</span> <span class=n>already</span> <span class=n>contains</span> <span class=n>value</span> <span class=k>for</span> <span class=n>xxx</span><span class=p>.</span><span class=na>XxMapper</span><span class=p>.</span><span class=na>xxMethod</span>
</code></pre></div> <p>原因：</p> <ul> <li>Mapper 继承了 BaseMapper 之后，如果在 Mapper 中重载了 BaseMapper 中的方法，在应用启动时会出现如上异常；</li> <li>Xml Mapper 中定义了与 BaseMapper 同名 sql 的 id</li> </ul> <p>解决：重命名该方法</p> <ul> <li>No qualifying bean of type</li> </ul> <div class=highlight><pre><span></span><code><span class=nl>NoSuchBeanDefinitionException</span><span class=p>:</span> <span class=n>No</span> <span class=n>qualifying</span> <span class=n>bean</span> <span class=n>of</span> <span class=n>type</span> <span class=err>&#39;</span><span class=n>com</span><span class=p>.</span><span class=na>ciicgat</span><span class=p>.</span><span class=na>sdk</span><span class=p>.</span><span class=na>data</span><span class=p>.</span><span class=na>mybatis</span><span class=p>.</span><span class=na>generator</span><span class=p>.</span><span class=na>template</span><span class=p>.</span><span class=na>BaseMapper</span><span class=o>&lt;</span><span class=n>xxx</span><span class=p>.</span><span class=na>Xxx</span><span class=o>&gt;</span><span class=err>&#39;</span> <span class=n>available</span><span class=p>:</span> <span class=n>expected</span> <span class=n>at</span> <span class=n>least</span> <span class=mi>1</span> <span class=n>bean</span> <span class=n>which</span> <span class=n>qualifies</span> <span class=n>as</span> <span class=n>autowire</span> <span class=n>candidate</span><span class=p>.</span> <span class=n>Dependency</span> <span class=n>annotations</span><span class=p>:</span> <span class=p>{</span><span class=nd>@org.springframework.beans.factory.annotation.Autowired</span><span class=p>(</span><span class=n>required</span><span class=o>=</span><span class=kc>true</span><span class=p>)</span>
</code></pre></div> <p>原因：Mapper 所在的包未被扫描到</p> <p>解决：将其配置到<code>Application.java</code>的<code>@MapperScan</code>中</p> <ul> <li>Invalid bound statement (not found)</li> </ul> <div class=highlight><pre><span></span><code><span class=n>org</span><span class=p>.</span><span class=na>apache</span><span class=p>.</span><span class=na>ibatis</span><span class=p>.</span><span class=na>binding</span><span class=p>.</span><span class=na>BindingException</span><span class=p>:</span> <span class=n>Invalid</span> <span class=n>bound</span> <span class=nf>statement</span> <span class=p>(</span><span class=n>not</span> <span class=n>found</span><span class=p>):</span> <span class=n>xx</span><span class=p>.</span><span class=na>XxxService</span><span class=p>.</span><span class=na>xxMethod</span>
</code></pre></div> <p>原因：</p> <ul> <li>Mapper Xml 文件未被扫描</li> <li>Mapper Xml 中无对应方法</li> <li>Mapper Xml 与 Mapper 的 ResultType 不一致</li> <li>MapperScan 未直接配置 Mapper 的包，可能只配置了 Mapper 的父包</li> </ul> <p>解决：</p> <ul> <li><code>application.properties</code>中配置 xml 路径 如:<code>mybatis.mapper-locations=classpath*:mapper/*.xml</code></li> <li>检查并加入对应方法</li> <li>检查并使其一致</li> <li> <p>配置<code>@MapperScan</code>到具体的 Mapper 所在的包，如果存在多个 mapper 包可考虑使用通配符</p> </li> <li> <p>BaseMapper could not be found</p> </li> </ul> <div class=highlight><pre><span></span><code><span class=n>Field</span> <span class=n>baseMapper</span> <span class=n>in</span> <span class=n>com</span><span class=p>.</span><span class=na>ciicgat</span><span class=p>.</span><span class=na>sdk</span><span class=p>.</span><span class=na>data</span><span class=p>.</span><span class=na>mybatis</span><span class=p>.</span><span class=na>generator</span><span class=p>.</span><span class=na>template</span><span class=p>.</span><span class=na>BaseServiceImpl</span> <span class=n>required</span> <span class=n>a</span> <span class=n>bean</span> <span class=n>of</span> <span class=n>type</span> <span class=err>&#39;</span><span class=n>com</span><span class=p>.</span><span class=na>ciicgat</span><span class=p>.</span><span class=na>sdk</span><span class=p>.</span><span class=na>data</span><span class=p>.</span><span class=na>mybatis</span><span class=p>.</span><span class=na>generator</span><span class=p>.</span><span class=na>template</span><span class=p>.</span><span class=na>BaseMapper</span><span class=err>&#39;</span> <span class=n>that</span> <span class=n>could</span> <span class=n>not</span> <span class=n>be</span> <span class=n>found</span><span class=p>.</span>
</code></pre></div> <p>原因：只继承了 BaseService 没有继承 BaseMapper</p> <p>解决：对应的 Mapper 需继承 BaseMapper</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../mybatis-pagehelper/ class="md-footer__link md-footer__link--prev" aria-label="上一页: Mybatis分页插件" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> Mybatis分页插件 </div> </div> </a> <a href=../../redis/ class="md-footer__link md-footer__link--next" aria-label="下一页: redis 模块" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> redis 模块 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2016 - 2021 guanaitong </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["content.code.annotate", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", null], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.b1047164.min.js></script> </body> </html>